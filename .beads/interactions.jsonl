{"id":"object-sense-03d","title":"Build CLI commands (ingest, show-object, show-type, etc.)","description":"CLI commands: ingest \u003cpath\u003e, show-object \u003cid\u003e, show-type \u003cname\u003e, show-entity \u003cid\u003e, review-types, search \u003cquery\u003e. See concept_v1.md §11 for spec.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T20:45:20.354498356-08:00","updated_at":"2025-12-25T20:17:07.30759611-08:00","closed_at":"2025-12-25T20:17:07.30759611-08:00","close_reason":"CLI commands implemented: setup, ingest, show-object, show-type, show-entity, review-types, search, stats, init-world, reset-world. RAW image support added. Remaining bugs are in underlying logic, tracked separately.","dependencies":[{"issue_id":"object-sense-03d","depends_on_id":"object-sense-y10","type":"blocks","created_at":"2025-12-22T20:45:59.633068279-08:00","created_by":"daemon"}]}
{"id":"object-sense-073","title":"Implement shadow-sync CLI command","description":"CLI command to sync IMI data into ObjectSense shadow graph.\n\nUsage:\n  object-sense shadow-sync /path/to/imi.db [--full|--incremental]\n\nBehavior:\n- Reads IMI sqlite using the adapter\n- Creates OS Objects, Signals, Evidence\n- Runs type inference on new observations\n- Builds/updates identity graph\n- Reports: 'Processed N photos, proposed M types, resolved K entities'\n\nThis lets you run OS on real IMI data without touching IMI's production behavior.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-24T23:29:26.420299107-08:00","updated_at":"2025-12-24T23:29:26.420299107-08:00","dependencies":[{"issue_id":"object-sense-073","depends_on_id":"object-sense-579","type":"blocks","created_at":"2025-12-24T23:30:47.172678568-08:00","created_by":"daemon"}]}
{"id":"object-sense-0s1","title":"Impl: Resolution strategies per entity_nature (Correction #6)","description":"Implement signal weighting profiles per entity_nature (Correction #6).\n\n**CRITICAL: Signal weighting, NOT separate pipelines**\n- ONE entity resolver with shared machinery\n- entity_nature selects which signals are weighted heavily vs. lightly\n- Preserves anti-domain-partitioning principle (Correction #10)\n\n**Signal weight profiles (sum to 1.0 per nature):**\n- individual: embedding(0.35), signature(0.25), location(0.15), timestamp(0.10), det_id(0.15)\n- class: text_embedding(0.40), facet_agreement(0.30), name_match(0.20), det_id(0.10)\n- group: member_overlap(0.35), location(0.25), temporal_proximity(0.25), det_id(0.15)\n- event: timestamp(0.30), participants(0.30), location(0.20), duration(0.10), det_id(0.10)\n\n**Implementation:**\n```python\ndef compute_entity_similarity(observation, candidate, entity_nature):\n    weights = SIGNAL_WEIGHTS[entity_nature]\n    return sum(weight * compute_signal(obs, cand, signal) \n               for signal, weight in weights.items())\n```\n\n**Each nature has tunable thresholds (per-nature T_link, T_new).**\n\n**Refs:** design_v2_corrections.md §6\n**Tags:** v2-design, feature","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-30T19:39:43.248644247-08:00","updated_at":"2025-12-30T19:55:16.450715693-08:00","dependencies":[{"issue_id":"object-sense-0s1","depends_on_id":"object-sense-80x","type":"blocks","created_at":"2025-12-30T19:41:12.972801398-08:00","created_by":"daemon"},{"issue_id":"object-sense-0s1","depends_on_id":"object-sense-zk0","type":"blocks","created_at":"2025-12-30T19:41:13.00855327-08:00","created_by":"daemon"}]}
{"id":"object-sense-1i0","title":"Implement entity resolution and clustering","description":"Soft clustering of observations into entities using late fusion strategy.\n\nSignal combination (priority order):\n1. Hard IDs (product_id, SKU, trip_id) → 1.0 confidence\n2. Same-modality similarity (text↔text via BGE, image↔image via CLIP)\n3. Cross-modal similarity (image↔text via CLIP embeddings)\n\nAlgorithm: weighted_combine(signals) per design_notes.md.\n\nProto-entities compete and stabilize based on confidence scores. See concept_v1.md §4 Step 5 and §5 Layer 2.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T20:45:19.536224248-08:00","updated_at":"2026-01-03T00:08:36.743471556-08:00","closed_at":"2026-01-03T00:08:36.743471556-08:00","close_reason":"Entity resolution implemented: EntityResolver in resolver.py with deterministic ID resolution, similarity-based matching, proto-entity creation, and prototype updates. Wired into ingest pipeline with extraction-based deterministic IDs. 12 spine tests passing.","dependencies":[{"issue_id":"object-sense-1i0","depends_on_id":"object-sense-fj1","type":"blocks","created_at":"2025-12-22T20:45:59.518010975-08:00","created_by":"daemon"},{"issue_id":"object-sense-1i0","depends_on_id":"object-sense-c31","type":"blocks","created_at":"2026-01-02T23:36:55.663421222-08:00","created_by":"daemon"}]}
{"id":"object-sense-2td","title":"Schema: Add observation_kind, facets, deterministic_ids fields","description":"New fields on observations table for routing and extraction (Corrections #2, #8).\n\n**Add to observations:**\n- observation_kind: VARCHAR (low-cardinality routing hint, ~20 values max)\n  - Does NOT reference type_candidates\n  - Used ONLY for pipeline routing and soft search filtering\n- facets: JSONB (extracted attributes)\n- deterministic_ids: JSONB array of {id_type, id_value, id_namespace} tuples\n- candidate_type_id: FK → type_candidates (LLM-assigned, mutable on merge)\n  - This is where semantic type labeling lives\n- stable_type_id: FK → types (nullable, set after promotion)\n\n**Three-level type reference:**\n| Field | Purpose | Cardinality |\n|-------|---------|-------------|\n| observation_kind | Routing only | Low (~20 values) |\n| candidate_type_id | LLM proposal | High (all candidates) |\n| stable_type_id | Ontological type | Medium (stable types) |\n\n**CRITICAL:** All semantic type labeling flows through candidate_type_id, NOT observation_kind.\n\n**Remove:** primary_type_id (FK)\n\n**Refs:** design_v2_corrections.md §2, §8\n**Tags:** v2-design, breaking, schema","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T19:38:51.877931831-08:00","updated_at":"2025-12-30T20:36:48.771890871-08:00","closed_at":"2025-12-30T20:36:48.771890871-08:00","close_reason":"Complete: All Phase 2 schema changes implemented and tests pass.","dependencies":[{"issue_id":"object-sense-2td","depends_on_id":"object-sense-7kb","type":"blocks","created_at":"2025-12-30T19:41:02.110496909-08:00","created_by":"daemon"},{"issue_id":"object-sense-2td","depends_on_id":"object-sense-xyh","type":"blocks","created_at":"2025-12-30T19:41:05.370671041-08:00","created_by":"daemon"}]}
{"id":"object-sense-3rh","title":"Implement type evolution mechanisms (alias, merge, split, deprecate)","description":"Implement type evolution: alias (multiple names→one type), merge (combine types), split (create subtypes), deprecate (soft delete + migrate). See concept_v1.md §7 and design_notes.md 'Type Evolution Mechanisms'.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-22T20:45:19.960300641-08:00","updated_at":"2025-12-22T21:05:01.229444241-08:00","dependencies":[{"issue_id":"object-sense-3rh","depends_on_id":"object-sense-y10","type":"blocks","created_at":"2025-12-22T20:45:59.7423231-08:00","created_by":"daemon"}]}
{"id":"object-sense-52u","title":"Test: Type Non-Authoritativeness Contract (Correction #3)","description":"Add tests enforcing that types don't determine identity.\n\n**Required tests:**\n- Entity resolution with observation_kind='unknown' → should still work\n- Flip observation_kind mid-stream → entities should not break\n- Randomized observation_kind values → identity remains correct\n\n**Code review checklist:**\n- No 'if observation.observation_kind == X' in identity logic\n- All type-based routing must be soft (boost scores, not hard filters)\n\n**Refs:** design_v2_corrections.md §3\n**Tags:** v2-design, test","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T19:40:23.747017849-08:00","updated_at":"2025-12-30T19:40:23.747017849-08:00","dependencies":[{"issue_id":"object-sense-52u","depends_on_id":"object-sense-zk0","type":"blocks","created_at":"2025-12-30T19:41:27.288463126-08:00","created_by":"daemon"}]}
{"id":"object-sense-579","title":"Build IMI sqlite reader for ObjectSense","description":"Read-only adapter to ingest IMI's sqlite database into ObjectSense.\n\nRequirements:\n- Read from IMI's photos, metadata, raw_exif_json, burst_groups, descriptions tables\n- Convert to ObjectSense Objects, Signals, Evidence per the signal schema\n- Handle incremental sync (only process new/changed rows)\n- No writes to IMI database - strictly read-only\n\nThis is the 'parasitize' step - OS observes IMI without affecting it.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-24T23:29:26.315512995-08:00","updated_at":"2025-12-24T23:29:26.315512995-08:00","dependencies":[{"issue_id":"object-sense-579","depends_on_id":"object-sense-589","type":"blocks","created_at":"2025-12-24T23:30:47.138167985-08:00","created_by":"daemon"}]}
{"id":"object-sense-589","title":"Design signal schema for IMI→ObjectSense data flow","description":"Define how IMI's data becomes ObjectSense primitives.\n\nMapping:\n- IMI photos → OS Objects (medium=image)\n- IMI raw_exif_json → OS Object.slots + Evidence\n- IMI burst_groups → OS Signal(type='burst_group')\n- IMI quality scores → OS Signal(type='quality_sharpness', etc.)\n- IMI descriptions → OS Evidence(source=vision_model)\n- IMI embeddings → OS Signatures\n\nKey decisions:\n- Which IMI fields become slots vs evidence vs signals?\n- How to handle IMI's geocoding_cache → OS place entities?\n- Schema for temporal proximity grouping (generic burst detection)\n\nOutput: Design doc or code comments defining the contract.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-24T23:28:59.413399395-08:00","updated_at":"2025-12-24T23:28:59.413399395-08:00","dependencies":[{"issue_id":"object-sense-589","depends_on_id":"object-sense-fj1","type":"blocks","created_at":"2025-12-24T23:30:47.293345275-08:00","created_by":"daemon"}]}
{"id":"object-sense-5hx","title":"Build Sparkstation embedding client","description":"Create async client wrapper for Sparkstation embedding endpoints.\n\nCapabilities needed:\n- embed_text(texts: list[str]) → list[list[float]] using bge-large (1024-dim)\n- embed_image(images: list[bytes|str]) → list[list[float]] using clip-vit (768-dim)\n- embed_text_clip(texts: list[str]) → list[list[float]] using clip-vit (768-dim)\n\nUse OpenAI SDK with base_url=settings.llm_base_url.\nHandle batching, retries, and errors gracefully.\n\nBlocked by: nothing (can start now)\nBlocks: object-sense-mnz (feature extraction needs this)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T20:12:07.402922435-08:00","updated_at":"2025-12-24T20:32:56.770155793-08:00","closed_at":"2025-12-24T20:32:56.770155793-08:00","close_reason":"Implemented EmbeddingClient with all 3 methods. Unit tests (13) + integration tests (2) pass. Manual verification against live Sparkstation confirmed."}
{"id":"object-sense-6cj","title":"Revisit gpt-oss tool calling after vLLM Harmony support improves","description":"vLLM Harmony support is currently incomplete (4/14 sub-issues done per https://github.com/vllm-project/vllm/issues/23217). LiteLLM also has gaps (https://github.com/BerriAI/litellm/issues/13300).\n\nCurrent workaround: increased retries in type inference agent.\n\nWhen to revisit:\n- vLLM Harmony issue shows significant progress (\u003e10/14 done)\n- /v1/responses endpoint becomes available in Sparkstation\n- Test with scripts/test_tool_calls.py to verify fix\n\nRelated: object-sense-9vs (flaky tool calls bug)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-25T23:02:52.617731871-08:00","updated_at":"2025-12-25T23:02:52.617731871-08:00"}
{"id":"object-sense-7kb","title":"Design review \u0026 approval","description":"Review design_v2_corrections.md with stakeholders.\n\n**Checklist:**\n- [ ] Review all 10 corrections for technical accuracy\n- [ ] Verify migration path is feasible\n- [ ] Confirm breaking change impact is acceptable\n- [ ] Sign off on Type Non-Authoritativeness Contract\n- [ ] Approve entity_nature values (individual|class|group|event)\n- [ ] Set document status from DRAFT to APPROVED\n\n**Refs:** design_v2_corrections.md\n\n**Tags:** v2-design, docs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T19:38:51.630183988-08:00","updated_at":"2025-12-30T20:18:14.093454832-08:00","closed_at":"2025-12-30T20:18:14.093454832-08:00","close_reason":"Design reviewed and approved. All 10 corrections technically sound, migration path feasible."}
{"id":"object-sense-7yy","title":"Add spine integration tests for entity resolution","description":"Add real DB integration tests that prove the entity resolution spine works correctly.\n\n**Tests needed:**\n1. Test A - Deterministic ID create-on-miss: 2 observations with same det ID → 1 entity, 2 hard links\n2. Test B - Canonical chain compression: A→B→C merge chain → path compression on resolve\n3. Test C - Type authority irrelevance: Same det ID with different observation_kind → same entity\n\n**Requirements:**\n- Use real async DB fixtures (no mocks)\n- Mark as @pytest.mark.integration\n- Create tests/conftest.py with session fixtures\n- File: tests/test_resolution_spine.py\n\n**Refs:** design_v2_corrections.md §5, §8","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T23:06:52.462302771-08:00","updated_at":"2026-01-02T23:22:59.679054946-08:00","closed_at":"2026-01-02T23:22:59.679054946-08:00","close_reason":"All 10 spine integration tests implemented and passing. Tests cover: deterministic ID create-on-miss, canonical chain compression, and type authority irrelevance."}
{"id":"object-sense-80x","title":"Schema: Add entity_nature field to entities (Correction #6)","description":"Add required fields to entities table for resolution and versioning (Corrections #5, #6).\n\n**Add to entities:**\n- entity_nature: VARCHAR NOT NULL\n  - Allowed values: individual | class | group | event\n- canonical_entity_id: UUID REFERENCES entities(entity_id)\n  - NULL = \"I am canonical\" (current truth)\n  - Non-NULL = points to merged target entity\n  - Enables merge chain resolution without breaking old links\n\n**Update EntityHypothesis schema:**\n- Add entity_nature: Literal['individual', 'class', 'group', 'event']\n\n**Refs:** design_v2_corrections.md §5, §6\n**Tags:** v2-design, schema","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T19:38:52.007009876-08:00","updated_at":"2025-12-30T20:36:48.779314121-08:00","closed_at":"2025-12-30T20:36:48.779314121-08:00","close_reason":"Complete: All Phase 2 schema changes implemented and tests pass.","dependencies":[{"issue_id":"object-sense-80x","depends_on_id":"object-sense-7kb","type":"blocks","created_at":"2025-12-30T19:41:02.138085322-08:00","created_by":"daemon"}]}
{"id":"object-sense-9lf","title":"Impl: Deterministic ID priority logic (Correction #8)","description":"Implement deterministic ID detection and priority in entity resolution.\n\n**Strong IDs (100% trust):** SKU, UPC, ISBN, product_id, trip_id, SHA256, GPS\n**Weak IDs (high trust, verify):** Filenames, URLs, Timestamps\n\n**Resolution priority:**\n1. Deterministic ID match → posterior=1.0, status='hard'\n2. Deterministic ID NOT found → CREATE entity for ID, then hard link\n3. No deterministic ID → similarity clustering\n4. ID conflict → flag for review via identity_conflicts\n\n**CRITICAL:** Deterministic IDs can CREATE entities.\n- First-time IDs must create an entity anchored to that ID\n- This prevents duplicate entities for first-time IDs\n- Two observations with same SKU always link to same entity\n\n**Key invariant:** Similarity NEVER overrides deterministic IDs.\n\n**Refs:** design_v2_corrections.md §8\n**Tags:** v2-design, feature","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T19:39:43.378968926-08:00","updated_at":"2025-12-30T20:08:12.241233989-08:00","dependencies":[{"issue_id":"object-sense-9lf","depends_on_id":"object-sense-2td","type":"blocks","created_at":"2025-12-30T19:41:17.050938673-08:00","created_by":"daemon"},{"issue_id":"object-sense-9lf","depends_on_id":"object-sense-zk0","type":"blocks","created_at":"2025-12-30T19:41:17.084813949-08:00","created_by":"daemon"},{"issue_id":"object-sense-9lf","depends_on_id":"object-sense-l1p","type":"blocks","created_at":"2025-12-30T19:55:36.547485271-08:00","created_by":"daemon"}]}
{"id":"object-sense-9r7","title":"Fix flaky TypeInference integration tests","description":"Integration tests for TypeInferenceAgent are flaky due to LLM output variability.\n\nThe issue: gpt-oss-20b sometimes produces output that doesn't match the TypeProposal schema exactly, causing pydantic-ai to fail validation after max retries.\n\nPotential fixes:\n1. Increase retries in Agent config (currently 2)\n2. Make TypeProposal schema more lenient (more optional fields, looser constraints)\n3. Improve system prompt to be more explicit about required fields\n4. Add output_mode='prompted' instead of relying on native JSON schema\n5. Add retry logic in the test itself\n\nObserved error:\npydantic_ai.exceptions.UnexpectedModelBehavior: Exceeded maximum retries (2) for output validation","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-25T01:12:26.127596336-08:00","updated_at":"2025-12-25T19:37:44.62283929-08:00","closed_at":"2025-12-25T19:37:44.62283929-08:00","close_reason":"Fixed by using NativeOutput (response_format) instead of ToolOutput for structured output, and adding value coercion for SlotValue"}
{"id":"object-sense-9vs","title":"Fix flaky LLM tool calls in pydantic-ai","description":"Local LLM (gpt-oss-20b) emits control tokens like '\u003c|channel|\u003ecommentary' in tool call names when used through pydantic-ai, causing 'exceeded max retries' errors. Same image ingests successfully ~30% of the time.\n\nObservations:\n- Error: Tool 'find_similar_objects\u003c|channel|\u003ecommentary' exceeded max retries count of 1\n- Direct model calls work fine - issue is specific to pydantic-ai tool formatting\n- Agent retries=5 doesn't help because tool retry limit appears hardcoded to 1\n- Previously marked as fixed in flaky integration tests but still occurring\n\nPossible causes to investigate:\n1. How pydantic-ai formats tool schemas for the model\n2. Whether gpt-oss-20b needs different tool call formatting\n3. Tool retry configuration in pydantic-ai\n4. Whether to disable tools when type store is empty (workaround)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-25T20:43:49.052404264-08:00","updated_at":"2025-12-25T23:04:28.991462121-08:00","closed_at":"2025-12-25T23:04:28.991462121-08:00","close_reason":"Root cause: vLLM Harmony format support incomplete (4/14 issues done). Control tokens leak into tool names during multi-turn tool calling. Workaround: increased retries to 5. Long-term tracking in object-sense-6cj."}
{"id":"object-sense-a1a","title":"Implement medium probing and affordance detection","description":"Detect medium (image/text/json/video/audio/binary) from file headers, extensions, entropy. Map mediums to affordances (can_embed, can_detect_objects, etc.). See concept_v1.md §3.2.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T20:45:18.912321271-08:00","updated_at":"2025-12-24T20:52:14.062610896-08:00","closed_at":"2025-12-24T20:52:14.062610896-08:00","close_reason":"Closed","dependencies":[{"issue_id":"object-sense-a1a","depends_on_id":"object-sense-y10","type":"blocks","created_at":"2025-12-22T20:45:59.13866307-08:00","created_by":"daemon"}]}
{"id":"object-sense-awd","title":"Schema: Create type_candidates table (Correction #7)","description":"New table for provisional type labels (Stage A of type lifecycle).\n\n**Table: type_candidates**\n```sql\nCREATE TABLE type_candidates (\n  candidate_id UUID PRIMARY KEY,\n  proposed_name VARCHAR NOT NULL,\n  normalized_name VARCHAR NOT NULL,  -- lowercase, stripped, for dedup\n  status VARCHAR DEFAULT 'proposed',\n  merged_into_candidate_id UUID REFERENCES type_candidates(candidate_id),\n  promoted_to_type_id UUID REFERENCES types(type_id),\n  evidence_count INT DEFAULT 1,\n  coherence_score FLOAT,\n  created_at TIMESTAMP,\n  updated_at TIMESTAMP,\n  last_referenced_at TIMESTAMP\n);\n\nCREATE INDEX idx_type_candidates_normalized ON type_candidates(normalized_name);\n```\n\n**Design decision: No UNIQUE on proposed_name**\n- Duplicates allowed (LLM may propose \"wildlife_photo\" and \"Wildlife Photo\")\n- Background job detects duplicates via normalized_name\n- Merge lower-evidence into higher-evidence candidates\n\n**Merge-chain resolution (v0 chooses one):**\n- Write-time: Update observations.candidate_type_id on merge\n- Query-time: Follow merged_into_candidate_id chain at read time\n\n**observations.candidate_type_id references type_candidates.candidate_id (FK)**\n\n**Refs:** design_v2_corrections.md §7\n**Tags:** v2-design, schema","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T19:38:52.134615246-08:00","updated_at":"2025-12-30T20:36:48.781265635-08:00","closed_at":"2025-12-30T20:36:48.781265635-08:00","close_reason":"Complete: All Phase 2 schema changes implemented and tests pass.","dependencies":[{"issue_id":"object-sense-awd","depends_on_id":"object-sense-7kb","type":"blocks","created_at":"2025-12-30T19:41:02.166565209-08:00","created_by":"daemon"}]}
{"id":"object-sense-bcd","title":"Docs: Update API documentation","description":"Update API docs for v2 changes.\n\n**Affected endpoints:**\n- Ingestion: observation_kind, facets, deterministic_ids\n- Entity resolution: entity_nature, status, posterior\n- Types: TypeCandidate vs Type distinction\n- stable_type_id vs observation_kind semantics\n\n**Document:**\n- When stable_type_id is set (after promotion)\n- How to query by observation_kind (routing) vs stable_type_id (ontological)\n- Entity versioning and lineage queries\n\n**Tags:** v2-design, docs","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T19:40:25.361394513-08:00","updated_at":"2025-12-30T19:40:25.361394513-08:00","dependencies":[{"issue_id":"object-sense-bcd","depends_on_id":"object-sense-pu7","type":"blocks","created_at":"2025-12-30T19:41:30.713150792-08:00","created_by":"daemon"}]}
{"id":"object-sense-bk9","title":"Enforce engine-controlled deterministic ID namespaces","description":"Problem: LLM invents arbitrary namespace strings (catalog_sku, product_sku, etc.) causing duplicate entities for same IDs.\n\nDesign Principle: Namespaces are stable \"system-of-record scopes\", NOT arbitrary labels.\n\nValid namespace patterns:\n- source:\u003cdataset\u003e — e.g., source:wildlife_survey_2024, source:product_catalog\n- global:\u003cauthority\u003e — e.g., global:upc, global:isbn, global:iucn_species\n- geo:wgs84 — GPS coordinates\n- user:\u003ctenant\u003e — user-provided IDs\n\nLLM must NOT invent namespaces. Engine assigns namespace from:\n1. Extraction context (e.g., JSON file → source:json or dataset name if known)\n2. ID type mapping (e.g., gps → geo:wgs84, upc → global:upc)\n3. Explicit allowlist lookup\n\nImplementation:\n1. Define namespace allowlist/patterns in config\n2. In cli.py union logic: if LLM proposes unknown namespace, override to context-appropriate namespace\n3. Record Evidence with predicate=\"namespace_overridden\" when override happens\n4. Update type inference prompt to omit namespace entirely (let engine assign)\n\nResult: Namespaces are stable scopes, not LLM hallucinations. Same (type, value) in same scope = same entity.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T00:10:26.141034079-08:00","updated_at":"2026-01-03T00:32:47.316158574-08:00","closed_at":"2026-01-03T00:32:47.316158574-08:00","close_reason":"Implemented engine-controlled namespace enforcement: config patterns, union logic with override tracking, Evidence recording, updated LLM prompt"}
{"id":"object-sense-c31","title":"Wire EntityResolver into ingest pipeline","description":"Integrate EntityResolver into cli.py ingest command (Step 5).\n\nCurrent state:\n- EntityResolver exists in resolution/resolver.py\n- Spine tests pass (10 integration tests)\n- resolve_canonical_entity with path compression works\n- Canonical resolution on link write prevents race conditions\n\nTODO:\n1. After type inference (Step 4), call EntityResolver.resolve()\n2. Pass observation, signatures, and entity_seeds from TypeProposal\n3. Store resulting ObservationEntityLinks\n4. Update entity prototypes as needed\n\nFiles:\n- src/object_sense/cli.py - ingest command\n- src/object_sense/resolution/resolver.py - EntityResolver\n\nRefs: design_v2_corrections.md §5","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T23:36:49.424157433-08:00","updated_at":"2026-01-03T00:07:29.194806704-08:00","closed_at":"2026-01-03T00:07:29.194806704-08:00","close_reason":"EntityResolver wired into ingest pipeline. Extraction produces deterministic_ids (JSON ID keys, EXIF GPS). IDs from extraction + LLM are unioned, deduped, stored on observation. Resolver called in same transaction. Step 4 failure gracefully handled with fallback to extracted IDs."}
{"id":"object-sense-cqz","title":"OPEN: Unified feature space alignment (visual/textual/structural)","description":"Open question: How do visual embeddings (CLIP), text embeddings, and structural features (schema hashes) align in a unified space? Needed for cross-medium entity clustering. See concept_v1.md §12.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T20:45:30.801514541-08:00","updated_at":"2025-12-24T20:04:42.662705291-08:00","closed_at":"2025-12-24T20:04:42.662705291-08:00","close_reason":"Resolved: Late fusion with separate embedding columns (text_embedding 1024, image_embedding 768, clip_text_embedding 768). See design_notes.md."}
{"id":"object-sense-czu","title":"Set up project structure (Python/FastAPI)","description":"Initialize pyproject.toml with UV, create src/object_sense/ layout, configure ruff + pyright, add basic FastAPI app skeleton. See concept_v1.md §11 for tech stack.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T20:45:18.628102441-08:00","updated_at":"2025-12-22T21:15:36.941493459-08:00","closed_at":"2025-12-22T21:15:36.941493459-08:00","close_reason":"Closed"}
{"id":"object-sense-db3","title":"Impl: TypeCandidate → Type promotion logic (Correction #7)","description":"Implement type candidate lifecycle and promotion.\n\n**Promotion thresholds (any of):**\n- Evidence threshold: evidence_count \u003e= 5 entities OR 20 observations\n- Coherence threshold: cluster tightness score \u003e 0.75\n- Time window: survives 7 days without merge/contradiction\n\n**Promotion process:**\n1. Create stable Type row with embedding (from entity cluster)\n2. Infer parent_type_id from entity graph\n3. Update TypeCandidate.status = 'promoted'\n4. Update TypeCandidate.promoted_to_type_id\n5. Update observations.stable_type_id for relevant observations\n\n**Background jobs:**\n- Promotion job (hourly): check candidates against thresholds\n- Cleanup job (daily): reject stale candidates, GC after 1 year\n\n**Refs:** design_v2_corrections.md §7\n**Tags:** v2-design, feature","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T19:39:43.518838474-08:00","updated_at":"2025-12-30T21:03:20.416916659-08:00","closed_at":"2025-12-30T21:03:20.416916659-08:00","close_reason":"Closed","dependencies":[{"issue_id":"object-sense-db3","depends_on_id":"object-sense-awd","type":"blocks","created_at":"2025-12-30T19:41:20.828137833-08:00","created_by":"daemon"}]}
{"id":"object-sense-ds4","title":"Fix LiteLLM tool calling passthrough in Sparkstation","description":"Tool calls are returned as content instead of tool_calls field.\n\nRoot cause: gateway/litellm.yaml has drop_params: true which drops the 'tools' parameter before it reaches vLLM.\n\nFix options:\n1. Set drop_params: false\n2. Add supports_function_calling: true per model\n3. Use allowed_params to whitelist tools/tool_choice\n\nFiles to modify:\n- gateway/litellm.yaml\n\nThis blocks ObjectSense type inference from using RAG tools.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-25T00:30:52.651842231-08:00","updated_at":"2025-12-25T01:11:26.31256545-08:00","closed_at":"2025-12-25T01:11:26.31256545-08:00","close_reason":"Sparkstation tool calling fixed. Integration tests pass (though flaky due to LLM output variability)."}
{"id":"object-sense-egs","title":"Implement temporal proximity grouping (generic burst detection)","description":"ObjectSense-level primitive for 'same scene, multiple observations'.\n\nThis is the physics, not the semantics:\n- Temporal proximity clustering (observations close in time)\n- Near-identical embedding similarity\n- Output: Signal(type='temporal_group', group_id=..., confidence=...)\n\nUse cases across domains:\n- Wildlife: burst of photos in 0.3s\n- Video: adjacent frames of same scene\n- Security: movement sequence\n- Inventory: multi-angle product shots\n\nIMI adds workflow semantics on top (representative selection, culling UX).\nObjectSense owns the grouping primitive.\n\nImplementation:\n- Configurable time threshold (default: 0.5s)\n- Optional embedding similarity check\n- Camera/source bucketing","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-24T23:30:58.669298486-08:00","updated_at":"2025-12-24T23:30:58.669298486-08:00"}
{"id":"object-sense-f4v","title":"End-to-end ingest pipeline testing","description":"Full integration testing of ingest pipeline: medium detection, extraction, embedding, type inference, database persistence. Verify all mediums work correctly (image, video, audio, text, JSON). Test with various file types including RAW images.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T20:17:16.109855504-08:00","updated_at":"2026-01-03T01:21:33.735422733-08:00","closed_at":"2026-01-03T01:21:33.735422733-08:00","close_reason":"E2E ingest pipeline tests implemented: 30 tests covering medium detection, extraction, entity resolution, namespace enforcement, type candidates, evidence, blob dedup, and full pipeline flows. Total test count now 239.","dependencies":[{"issue_id":"object-sense-f4v","depends_on_id":"object-sense-y4q","type":"blocks","created_at":"2025-12-25T20:17:21.328874179-08:00","created_by":"daemon"},{"issue_id":"object-sense-f4v","depends_on_id":"object-sense-c31","type":"blocks","created_at":"2026-01-02T23:36:55.554090128-08:00","created_by":"daemon"},{"issue_id":"object-sense-f4v","depends_on_id":"object-sense-bk9","type":"blocks","created_at":"2026-01-03T00:10:32.953907156-08:00","created_by":"daemon"}]}
{"id":"object-sense-fj1","title":"Implement LLM integration for type inference (tool calling)","description":"Integrate local LLM via tool calling for type inference. LLM queries type store (RAG), proposes primary_type + slots + maybe_new_type. 100% structured outputs. See concept_v1.md §4 Step 4 and §8.2.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T20:45:19.156750882-08:00","updated_at":"2025-12-25T00:03:27.259610388-08:00","closed_at":"2025-12-25T00:03:27.259610388-08:00","close_reason":"Closed","dependencies":[{"issue_id":"object-sense-fj1","depends_on_id":"object-sense-mnz","type":"blocks","created_at":"2025-12-22T20:45:59.401635524-08:00","created_by":"daemon"}]}
{"id":"object-sense-g34","title":"Impl: Slot validation utilities (Correction #9)","description":"Implement slot hygiene enforcement.\n\n**Module:** src/object_sense/utils/slots.py\n\n**Slot types:**\n- string: free text (use sparingly)\n- number: numeric with unit metadata\n- boolean: true/false\n- enum: one of fixed set\n- reference: entity reference with ref_entity_id, ref_type\n- list: ordered homogeneous collection\n\n**Functions:**\n- validate_slot(name, value) → structured format or ValidationError\n- is_slot_reference(value) → bool\n- extract_slot_for_index(value) → indexable value\n\n**Anti-patterns to detect:**\n- Freeform strings for rich domains (species: 'leopard')\n- Untyped numbers (length: 42)\n\n**Refs:** design_v2_corrections.md §9\n**Tags:** v2-design","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T19:39:44.278284741-08:00","updated_at":"2025-12-30T19:39:44.278284741-08:00"}
{"id":"object-sense-g9f","title":"Shadow-mode convergence with image_metadata_indexing","description":"Epic: Run ObjectSense in shadow mode on IMI data to prove the substrate before any migration.\n\nStrategy: 'Signals in, substrate out'\n- IMI stays production-pure, unchanged\n- ObjectSense reads IMI's sqlite (read-only)\n- OS builds identity graph, proposes types, tracks provenance\n- IMI does NOT consume OS output until Phase 2\n\nPhases:\n1. Shadow mode (OS processes IMI data, no consumption)\n2. First consumption (blob dedup OR place entities)\n3. Earned dependency (re-ID, cross-session entities)\n\nSuccess metric: 'If ObjectSense disappeared tomorrow, would IMI notice?'\n- Short term: No → good\n- Mid term: Slightly → ideal  \n- Long term: Yes → success","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-24T23:28:51.072974658-08:00","updated_at":"2025-12-24T23:28:51.072974658-08:00"}
{"id":"object-sense-hwd","title":"Design v2: Type Authority \u0026 Entity Resolution Clarifications","description":"Epic tracking implementation of all 10 design corrections from design_v2_corrections.md.\n\n**Scope:**\n1. Object → Observation rename (breaking)\n2. Split Type into routing hint vs ontological type\n3. Type Non-Authoritativeness Contract\n4. Tighten Type definition (TypeCandidate model)\n5. Explicit Entity Resolution algorithm (Step 5)\n6. Add entity_nature field\n7. TypeCandidate → Type promotion lifecycle\n8. Deterministic ID priority logic\n9. Slot hygiene rules\n10. Anti-goal: No domain partitioning\n\n**Migration Phases:**\n- Phase 2: Schema Changes (breaking)\n- Phase 3: Code Refactoring\n- Phase 4: Testing \u0026 Validation\n- Phase 5: Documentation\n\n**Tags:** v2-design, breaking, feature","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-30T19:38:20.762198526-08:00","updated_at":"2026-01-03T01:08:53.058135651-08:00","closed_at":"2026-01-03T01:08:53.058135651-08:00","close_reason":"9/10 design corrections implemented and enforced by code + tests. TypeCandidate→Type promotion belongs with type evolution (object-sense-3rh), not the design epic."}
{"id":"object-sense-i3t","title":"Phase 2: First consumption - blob dedup or place entities","description":"First point where IMI actually consumes ObjectSense output.\n\nOptions (pick one):\n1. Blob dedup: IMI queries OS for 'have I seen these bytes before?'\n2. Place entities: IMI uses OS's resolved location entities instead of raw GPS\n\nSuccess criteria:\n- IMI code calls OS (in-process, library mode)\n- One concrete feature improves\n- Minimal coupling (can still run without OS)\n\nThis is the 'slightly notice if OS disappeared' milestone.","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T23:29:27.323331549-08:00","updated_at":"2025-12-24T23:29:27.323331549-08:00","dependencies":[{"issue_id":"object-sense-i3t","depends_on_id":"object-sense-rck","type":"blocks","created_at":"2025-12-24T23:30:47.233388083-08:00","created_by":"daemon"}]}
{"id":"object-sense-j0z","title":"Schema: Create entity_evolution table (Correction #5)","description":"Track entity merge/split events with canonical resolution (Correction #5).\n\n**Table: entity_evolution**\n```sql\nCREATE TABLE entity_evolution (\n  event_id UUID PRIMARY KEY,\n  event_type VARCHAR NOT NULL,  -- merge | split\n  source_entity_ids UUID[] NOT NULL,\n  target_entity_id UUID NOT NULL REFERENCES entities(entity_id),\n  created_at TIMESTAMP NOT NULL DEFAULT now(),\n  evidence JSONB\n);\n```\n\n**Canonical resolution is REQUIRED but implementation is flexible:**\n- App-layer pointer chasing (Python follows canonical_entity_id chain)\n- DB helper function (PL/pgSQL or recursive CTE)\n- Materialized view (pre-computed mappings, refreshed on merge)\n\nv0 chooses one; the requirement is consumers always get canonical entities.\n\n**Merge semantics:**\n1. Create merged entity (target)\n2. Set canonical_entity_id = target on all sources\n3. Record in entity_evolution\n4. ObservationEntityLinks remain valid (point to source)\n5. Queries resolve to canonical for current truth\n\n**Split semantics:**\n1. Create new child entities\n2. Original either remains canonical or deprecated\n3. Record in entity_evolution with split evidence\n\n**Refs:** design_v2_corrections.md §5\n**Tags:** v2-design, schema","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T19:38:52.500903401-08:00","updated_at":"2025-12-30T20:36:48.783114267-08:00","closed_at":"2025-12-30T20:36:48.783114267-08:00","close_reason":"Complete: All Phase 2 schema changes implemented and tests pass.","dependencies":[{"issue_id":"object-sense-j0z","depends_on_id":"object-sense-7kb","type":"blocks","created_at":"2025-12-30T19:41:02.197664334-08:00","created_by":"daemon"}]}
{"id":"object-sense-j9q","title":"Docs: Update contributor guide with anti-patterns","description":"Document anti-patterns and code review checklist.\n\n**Anti-patterns to document:**\n- Type authority leakage (hard-gating by type)\n- Domain-specific branches in resolution\n- Similarity overriding deterministic IDs\n- Unstructured slot values\n- Freeform strings for rich domains\n\n**Code review checklist:**\n- No 'if observation.observation_kind == X' in identity logic\n- All type-based routing is soft (boost, not filter)\n- No domain-specific branches in core resolution\n- Slot values use structured format\n\n**Refs:** design_v2_corrections.md §3, §9, §10\n**Tags:** v2-design, docs","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T19:40:25.74764499-08:00","updated_at":"2025-12-30T19:40:25.74764499-08:00","dependencies":[{"issue_id":"object-sense-j9q","depends_on_id":"object-sense-pu7","type":"blocks","created_at":"2025-12-30T19:41:30.744199854-08:00","created_by":"daemon"}]}
{"id":"object-sense-jmt","title":"Verify TypeInferenceAgent works with Sparkstation tool calling","description":"After fixing Sparkstation tool calling (object-sense-ds4), verify that:\n\n1. TypeInferenceAgent can call search_types, get_type_details, find_similar_objects tools\n2. The full pydantic-ai agent works end-to-end with gpt-oss-20b\n3. Integration tests pass\n\nRun: pytest tests/test_type_inference.py -m integration","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T00:30:59.684375795-08:00","updated_at":"2025-12-25T01:11:26.319808165-08:00","closed_at":"2025-12-25T01:11:26.319808165-08:00","close_reason":"Sparkstation tool calling fixed. Integration tests pass (though flaky due to LLM output variability).","dependencies":[{"issue_id":"object-sense-jmt","depends_on_id":"object-sense-ds4","type":"blocks","created_at":"2025-12-25T00:31:03.622348914-08:00","created_by":"daemon"}]}
{"id":"object-sense-kr8","title":"Test: Threshold tuning on test corpus","description":"Tune entity resolution thresholds on real data.\n\n**Corpora:**\n- Wildlife observations (photos, species, individuals)\n- Product records (JSON, SKUs, variants)\n\n**Process:**\n1. Run resolution with default thresholds\n2. Log all decisions with scores\n3. Allow human feedback: 'these ARE same' / 'these are NOT same'\n4. Adjust thresholds via:\n   - Per-corpus calibration\n   - Per-entity_nature calibration\n   - Active learning on margin cases\n\n**Deliverable:** Documented threshold values per entity_nature.\n\n**Refs:** design_v2_corrections.md §5\n**Tags:** v2-design, test","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T19:40:24.337982036-08:00","updated_at":"2025-12-30T19:40:24.337982036-08:00","dependencies":[{"issue_id":"object-sense-kr8","depends_on_id":"object-sense-x49","type":"blocks","created_at":"2025-12-30T19:41:27.418793835-08:00","created_by":"daemon"}]}
{"id":"object-sense-l1p","title":"Schema: Create identity_conflicts table (Correction #8)","description":"Track deterministic ID conflicts for human review.\n\n**Table: identity_conflicts**\n```sql\nCREATE TABLE identity_conflicts (\n  conflict_id UUID PRIMARY KEY,\n  observation_id UUID NOT NULL REFERENCES observations(observation_id),\n  entity_id UUID NOT NULL REFERENCES entities(entity_id),\n  id_type VARCHAR NOT NULL,\n  id_value VARCHAR NOT NULL,\n  id_namespace VARCHAR NOT NULL,\n  conflict_type VARCHAR NOT NULL,  -- attribute_mismatch | duplicate_entry | id_collision\n  conflict_details JSONB NOT NULL,\n  resolution_status VARCHAR DEFAULT 'pending',\n  resolved_by UUID,\n  resolved_at TIMESTAMP,\n  created_at TIMESTAMP NOT NULL DEFAULT now()\n);\n\nCREATE INDEX idx_identity_conflicts_pending\n  ON identity_conflicts(resolution_status) WHERE resolution_status = 'pending';\n```\n\n**Purpose:** When deterministic ID matches but attributes conflict, create conflict row for review.\n\n**Refs:** design_v2_corrections.md §8\n**Tags:** v2-design, schema","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T19:55:29.409201155-08:00","updated_at":"2025-12-30T20:36:48.784637602-08:00","closed_at":"2025-12-30T20:36:48.784637602-08:00","close_reason":"Complete: All Phase 2 schema changes implemented and tests pass.","dependencies":[{"issue_id":"object-sense-l1p","depends_on_id":"object-sense-xyh","type":"blocks","created_at":"2025-12-30T19:55:36.410270735-08:00","created_by":"daemon"},{"issue_id":"object-sense-l1p","depends_on_id":"object-sense-7kb","type":"blocks","created_at":"2025-12-30T19:55:36.440646696-08:00","created_by":"daemon"}]}
{"id":"object-sense-lxo","title":"Test: Anti-domain-partitioning enforcement (Correction #10)","description":"Add tests ensuring no hidden domain silos.\n\n**Required tests:**\n- Mixed corpus (wildlife + products + text notes) → all resolve correctly\n- No 'if observation_kind ==' in entity resolution code (code scanning)\n- Cross-domain entity (product photo of animal) → works correctly\n\n**Code review checklist:**\n- No domain-specific branches in core resolution\n- Only one entity resolver (dispatches to strategies per entity_nature, not domain)\n\n**Refs:** design_v2_corrections.md §10\n**Tags:** v2-design, test","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T19:40:23.875734098-08:00","updated_at":"2025-12-30T19:40:23.875734098-08:00","dependencies":[{"issue_id":"object-sense-lxo","depends_on_id":"object-sense-zk0","type":"blocks","created_at":"2025-12-30T19:41:27.323258868-08:00","created_by":"daemon"}]}
{"id":"object-sense-mnz","title":"Implement feature extraction per medium (image, text, JSON)","description":"Build extractors per medium using Sparkstation models.\n\nEmbeddings per medium (late fusion strategy):\n- Image: image_embedding (CLIP visual 768) + text_embedding (caption→BGE 1024)\n- Text: text_embedding (BGE 1024) + clip_text_embedding (CLIP text 768)\n- JSON: text_embedding (fields→BGE 1024) + hash_value (schema hash)\n- Video: image_embedding (keyframe pool) + text_embedding (transcript→BGE)\n\nModels: bge-large (text), clip-vit (image/text cross-modal).\nOutput: Signature records with embeddings + hash_value + extra metadata.\n\nSee concept_v1.md §4 Step 3, §6, and design_notes.md (late fusion section).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T20:45:19.030456528-08:00","updated_at":"2025-12-24T23:19:21.331023357-08:00","closed_at":"2025-12-24T23:19:21.331023357-08:00","close_reason":"Implemented feature extraction for image/text/JSON with late-fusion embeddings (CLIP visual, BGE text, CLIP text cross-modal). 33 tests, all passing.","dependencies":[{"issue_id":"object-sense-mnz","depends_on_id":"object-sense-a1a","type":"blocks","created_at":"2025-12-22T20:45:59.285341832-08:00","created_by":"daemon"},{"issue_id":"object-sense-mnz","depends_on_id":"object-sense-5hx","type":"blocks","created_at":"2025-12-24T20:12:11.693932942-08:00","created_by":"daemon"}]}
{"id":"object-sense-pu7","title":"Docs: Update concept_v1.md → concept_v2.md","description":"Create updated concept document incorporating all corrections.\n\n**Key updates:**\n- Object → Observation terminology throughout\n- Emergence Order: Observation → Entity → Type → Domain\n- New §: Type Non-Authoritativeness Contract\n- Updated Step 4 (4A/4B split)\n- Updated Step 5 (explicit algorithm)\n- New field: entity_nature\n- Two-stage Type lifecycle (TypeCandidate → Type)\n- §5: Deterministic IDs Dominate Identity (new core principle)\n- Slot Hygiene Contract\n- Anti-Goal: No Global Domain Partitioning\n\n**Keep v1 for reference history.**\n\n**Refs:** design_v2_corrections.md\n**Tags:** v2-design, docs","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T19:40:24.931985255-08:00","updated_at":"2025-12-30T19:40:24.931985255-08:00","dependencies":[{"issue_id":"object-sense-pu7","depends_on_id":"object-sense-zk0","type":"blocks","created_at":"2025-12-30T19:41:30.679127579-08:00","created_by":"daemon"}]}
{"id":"object-sense-rck","title":"Build shadow dashboard for OS vs IMI comparison","description":"Visualization to compare ObjectSense's view vs IMI's current state.\n\nShows:\n- Types proposed by OS (species taxonomy, location hierarchy)\n- Entity clusters OS found (same individual across sessions?)\n- Dedup candidates OS identified that IMI missed\n- Provenance chains (why does OS believe X?)\n\nPurpose: Prove OS is adding value before any integration.\nThis is how we know Phase 2 is ready.\n\nCould be CLI tables, simple web UI, or notebook.","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T23:29:26.529995438-08:00","updated_at":"2025-12-24T23:29:26.529995438-08:00","dependencies":[{"issue_id":"object-sense-rck","depends_on_id":"object-sense-073","type":"blocks","created_at":"2025-12-24T23:30:47.202932581-08:00","created_by":"daemon"}]}
{"id":"object-sense-sj3","title":"Impl: Update type inference agent for Step 4A/4B split (Correction #2)","description":"Refactor type inference agent to output new schema.\n\n**Step 4A outputs:**\n- observation_kind (string, routing hint)\n- facets (JSONB, attribute hypotheses)\n- entity_seeds (list of EntityHypothesis with entity_nature)\n\n**Step 4B outputs:**\n- TypeCandidate rows if LLM proposes new label\n- Store as Evidence, not authoritative\n\n**Prompt changes:**\n- Explain entity_nature values (individual|class|group|event)\n- Request structured slots (not raw strings)\n- Extract deterministic IDs from facets\n\n**Refs:** design_v2_corrections.md §2\n**Tags:** v2-design","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:39:43.899500521-08:00","updated_at":"2025-12-30T21:03:20.423262597-08:00","closed_at":"2025-12-30T21:03:20.423262597-08:00","close_reason":"Closed","dependencies":[{"issue_id":"object-sense-sj3","depends_on_id":"object-sense-2td","type":"blocks","created_at":"2025-12-30T19:41:24.068942171-08:00","created_by":"daemon"},{"issue_id":"object-sense-sj3","depends_on_id":"object-sense-awd","type":"blocks","created_at":"2025-12-30T19:41:24.10616987-08:00","created_by":"daemon"}]}
{"id":"object-sense-wwo","title":"Phase 3: Cross-session entity re-identification","description":"The big payoff: 'Show me the same leopard across 3 trips.'\n\nRequirements:\n- Visual similarity model for individual re-ID\n- Temporal/spatial context signals\n- Confidence scoring and conflict resolution\n- Human correction loop (user confirms/denies matches)\n- Evidence accumulation over time\n\nThis is 6+ months out. Tracking to remember the goal.\n\nSuccess: IMI can answer queries that require persistent identity across sessions, powered by ObjectSense's entity graph.","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T23:29:28.891704546-08:00","updated_at":"2025-12-24T23:29:28.891704546-08:00","dependencies":[{"issue_id":"object-sense-wwo","depends_on_id":"object-sense-i3t","type":"blocks","created_at":"2025-12-24T23:30:47.263052814-08:00","created_by":"daemon"}]}
{"id":"object-sense-x11","title":"OPEN: Proto-entity decay policy","description":"Open question: Proto-entities that never stabilize should be pruned, but rare-but-real entities shouldn't. Need decay based on confidence, not just time/existence. See concept_v1.md §12.","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T20:45:31.112999967-08:00","updated_at":"2025-12-22T21:05:02.240875265-08:00"}
{"id":"object-sense-x49","title":"Test: Entity resolution unit and integration tests","description":"Comprehensive test suite for Step 5 entity resolution.\n\n**Unit tests:**\n- compute_entity_similarity with known pairs\n- Resolution strategy dispatch per entity_nature\n- Deterministic ID matching and priority\n- Threshold decision logic (T_link, T_new, T_margin)\n\n**Integration tests:**\n- Full resolution pipeline end-to-end\n- Proto-entity creation and linking\n- MergeProposal/SplitProposal generation\n- Entity versioning through evolution table\n\n**Threshold sensitivity tests:**\n- Varying T_link, T_new values\n- Edge cases at boundary values\n\n**Refs:** design_v2_corrections.md §5\n**Tags:** v2-design, test","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T19:40:24.002230342-08:00","updated_at":"2025-12-30T19:40:24.002230342-08:00","dependencies":[{"issue_id":"object-sense-x49","depends_on_id":"object-sense-zk0","type":"blocks","created_at":"2025-12-30T19:41:27.354972507-08:00","created_by":"daemon"},{"issue_id":"object-sense-x49","depends_on_id":"object-sense-0s1","type":"blocks","created_at":"2025-12-30T19:41:27.384171373-08:00","created_by":"daemon"}]}
{"id":"object-sense-x98","title":"OPEN: Evidence compaction strategy","description":"Open question: Storing every Evidence record forever doesn't scale. Need strategy to compact/summarize evidence once confidence stabilizes. See concept_v1.md §12.","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T20:45:31.003439848-08:00","updated_at":"2025-12-22T21:05:02.024271298-08:00"}
{"id":"object-sense-xyh","title":"Schema: Rename Object → Observation (Correction #1)","description":"Breaking rename of core model and table.\n\n**Changes:**\n- Rename SQLAlchemy model: Object → Observation\n- Rename table: objects → observations\n- Rename all FKs: object_id → observation_id\n- Update ObjectEntityLink → ObservationEntityLink\n- Update all imports, type hints, tests\n\n**Migration script needed for existing data.**\n\n**Refs:** design_v2_corrections.md §1\n**Tags:** v2-design, breaking, schema","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T19:38:51.752016609-08:00","updated_at":"2025-12-30T20:28:42.540334824-08:00","closed_at":"2025-12-30T20:28:42.540334824-08:00","close_reason":"Complete: Renamed Object→Observation across models, CLI, tests, and inference modules. All 130 tests pass.","dependencies":[{"issue_id":"object-sense-xyh","depends_on_id":"object-sense-7kb","type":"blocks","created_at":"2025-12-30T19:41:02.07594448-08:00","created_by":"daemon"}]}
{"id":"object-sense-y10","title":"Design and implement core data model (Objects, Types, Entities, Evidence)","description":"Implement Postgres schema for core primitives: Object, Type, Entity, Evidence, Signatures. See concept_v1.md §3 and §9 for data model. Use SQLAlchemy or raw SQL with asyncpg.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T20:45:18.785546533-08:00","updated_at":"2025-12-22T21:27:09.158812896-08:00","closed_at":"2025-12-22T21:27:09.158812896-08:00","close_reason":"Closed","dependencies":[{"issue_id":"object-sense-y10","depends_on_id":"object-sense-czu","type":"blocks","created_at":"2025-12-22T20:45:56.423723584-08:00","created_by":"daemon"}]}
{"id":"object-sense-y4q","title":"Fix Signature model 'embedding' keyword error","description":"During ingest, Signature creation fails with: 'embedding' is an invalid keyword argument for Signature. Need to check Signature model definition and fix how signatures are created in cli.py (lines 173, 183, 192).","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-25T20:17:16.004804224-08:00","updated_at":"2025-12-25T20:23:20.392826332-08:00","closed_at":"2025-12-25T20:23:20.392826332-08:00","close_reason":"Closed"}
{"id":"object-sense-yna","title":"OPEN: Fast-path vs slow-path latency strategy","description":"Open question: LLM inference on every blob is expensive. Need fast-path (hash match, deterministic IDs) that skips LLM vs slow-path (full semantic analysis). See concept_v1.md §12.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-22T20:45:30.90684612-08:00","updated_at":"2025-12-22T21:05:01.824452012-08:00"}
{"id":"object-sense-zk0","title":"Impl: Entity Resolution algorithm (Correction #5)","description":"Implement explicit Step 5 entity resolution algorithm.\n\n**Module:** src/object_sense/resolution/entity_resolver.py\n\n**Algorithm:**\n1. Deterministic ID resolution (HIGHEST PRIORITY)\n   - IDs are (id_type, id_value, id_namespace) tuples\n   - If match: hard link (posterior=1.0, status='hard')\n   - If NOT found: CREATE entity anchored to ID, then hard link\n   - If match + attribute conflict: create identity_conflicts row\n2. For each entity_seed (per-seed ID check; non-ID seeds via similarity):\n   a. Get candidate pool (observation_kind as soft filter)\n   b. Compute multi-signal similarity (weights per entity_nature)\n   c. Apply decision thresholds\n3. Create ObservationEntityLink rows with posterior, status, role\n4. Create/update proto-entities as needed\n5. Multi-seed consistency pass:\n   - reconcile_multi_seed_links(links, entity_seeds)\n   - Detect role conflicts, facet contradictions\n   - Downweight conflicting links (posterior *= 0.5)\n6. Generate MergeProposal/SplitProposal events\n\n**Thresholds:**\n- T_link: 0.85, T_new: 0.60, T_margin: 0.10\n\n**Refs:** design_v2_corrections.md §5\n**Tags:** v2-design, feature","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-30T19:39:43.11777707-08:00","updated_at":"2026-01-02T23:06:52.320815392-08:00","closed_at":"2026-01-02T23:06:52.320815392-08:00","close_reason":"Complete: Entity resolution algorithm implemented with all core components: EntityDeterministicId table, prototype embeddings on Entity, CandidatePoolService (pgvector ANN), SimilarityScorer (signal weights per entity_nature), EntityResolver (main algorithm), multi-seed reconciliation, prototype updates, link roles. 26 unit tests added. Spine integration tests deferred to separate issue.","dependencies":[{"issue_id":"object-sense-zk0","depends_on_id":"object-sense-xyh","type":"blocks","created_at":"2025-12-30T19:41:09.449476928-08:00","created_by":"daemon"},{"issue_id":"object-sense-zk0","depends_on_id":"object-sense-80x","type":"blocks","created_at":"2025-12-30T19:41:09.485435344-08:00","created_by":"daemon"},{"issue_id":"object-sense-zk0","depends_on_id":"object-sense-j0z","type":"blocks","created_at":"2025-12-30T19:41:09.516723606-08:00","created_by":"daemon"}]}
